<ion-app class="whiteBackground">
  <div *ngIf="defaultMode" class="fadedBack" [ngClass]="{'smallBack' : !fullAccountMode }"></div>
  <img *ngIf="defaultMode" class="fadedImg" [ngClass]="{'smallBack' : !fullAccountMode }" [src]="user.photoURL" src="../assets/noImg.png" onerror="this.src='../assets/noImg.png'" default="../assets/noImg.png"/>
  <img *ngIf="defaultMode" class="fadedImg" [ngClass]="{'smallBack' : !fullAccountMode }" [src]="user.photoURL" src="../assets/noImg.png" onerror="this.src='../assets/noImg.png'" default="../assets/noImg.png"/>

  <div class="paddingSpace" [ngClass]="{'androidHeader' : userOnAndroid }">
    <label class="topTitle1 animated fadeIn" *ngIf="defaultMode && fullAccountMode">Account</label>

    <div class="infoSection" *ngIf="defaultMode" [ngClass]="{'smallBack' : !fullAccountMode }">
      <img class="profileImg" [src]="user.photoURL" [ngClass]="{'smallImage' : !fullAccountMode }" src="../assets/noImg.png" onerror="this.src='../assets/noImg.png'" default="../assets/noImg.png"/>
      <div class="rightStuff" [ngClass]="{'hideLowOpacity' : !fullAccountMode }">
        <label class="topTitle2">{{user.name}}</label>
        <label class="topTitle3">
          <b>Keeps {{totalQuanityOfFish}} Species</b> <br />
          <i *ngIf="fullAccountMode">{{totalQuanityOfFollowers}} Followers <br /> {{totalQuanityOfFollows}} Following</i>
        </label>
        <!-- <button class="viewProfBtn">View Profile</button><br /> -->
        <button class="viewProfBtn" *ngIf="user.name && fullAccountMode" (click)="logout()">Logout</button>
        <button class="viewProfBtn" *ngIf="!user.name && fullAccountMode" (click)="login()">Login</button>
      </div>
    </div>

    <div class="ughAbsoule" [ngClass]="{'ughSmallAbsoulte' : !fullAccountMode }">
      <div class="aLittlePadding ion-page">
          <ion-content [scrollEvents]="true" (ionScroll)="logScrolling($event)">

            <div class="splittingLine"></div>

            <div class="paddingSpace" *ngIf="defaultMode">

              <!-- Section 1: WISHLIST -->
              <div  *ngIf="wishlist && wishlist.length >= 1">
                <label class="leftTitle topTitle2">Your Wishlist</label>

                <div class="wishlistPillScroller">

                  <div class="wishlistPill" *ngFor="let fish of wishlistItems" (click)="openFishDetailModal(fish)">
                    <img [src]="fish.Pics[0]" onerror="this.src='../assets/noImg.png'" />
                    <span class="triangle"></span>
                    <h1>{{fish.name}}</h1>
                    <h2>{{fish.genus}} &bull; {{fish.species}}</h2>
                  </div>

                </div>
              </div>

              <!-- Section 1: ALL TANKS -->
              <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
                <ion-refresher-content pullingIcon="arrow-down" refreshingSpinner="bubbles">
                </ion-refresher-content>
              </ion-refresher>

              <label class="leftTitle topTitle2">Your Tanks</label>
              <h4 class="notLoggedIn" *ngIf="!user.name">Login to create tanks & store species</h4>

              <h3 class="addTankTxt" *ngIf="tanks && tanks.length >= 1" (click)="addTank()">+ Begin New Tank</h3>
              <!-- <h3 class="wishlistTxt" *ngIf="wishlist && wishlist.length >= 1" (click)="triggerWishlist()">Wishlist</h3> -->

              <h4 class="noFishYetTxt" *ngIf="tanks && tanks.length < 1">
                <a (click)="addTank()">Start your first tank</a> to begin
              </h4>

              <div *ngIf="tanks">

                <ion-reorder-group (ionItemReorder)="reOrderTanks($event)" disabled="false">
                  <div *ngFor="let tank of tanks; let i = index">
                    <div class="tankSpace" [ngStyle]="{'background' : tank.fullColour}">

                      <ion-reorder>
                        <ion-icon name="list" class="selectPal"></ion-icon>
                      </ion-reorder>

                      <ion-icon *ngIf="colourFound" class="selectPal" (click)="changeColour(tank, i)" name="color-palette"></ion-icon>

                      <h3 *ngIf="!tank.nickname"  (click)="initTankDetail(tank.name)">{{tank.name}}</h3>
                      <h3 *ngIf="tank.nickname"  (click)="initTankDetail(tank.name)">{{tank.nickname}}</h3>

                      <h4 (click)="initTankDetail(tank.name)">
                        <label *ngIf="tank.temp">{{tank.temp}}deg</label>
                        <label *ngIf="tank.ph"> &bull; PH{{tank.ph}}</label>
                        <label *ngIf="tank.size"> &bull; {{tank.size}}L </label>
                      </h4>

                      <h5 *ngIf="tank.substrate" (click)="initTankDetail(tank.name)">With a {{tank.substrate}} Substrate</h5>

                    </div>
                  </div>
                </ion-reorder-group>


                <div class="forcedSpace"></div>

                <ion-spinner name="bubbles" color="primary" class="mySpinner" *ngIf="!doneLoadingTanks && user.name"></ion-spinner>

              </div>
            </div>
          </ion-content>
        </div>
    </div>

  </div>


  <!-- Section 2: ADD TANK -->
  <div class="addTank" *ngIf="addTankMode && !tankSizeImages">
    <ion-icon name="close" (click)="closeTank()" class="backArrowBlack"></ion-icon>

    <div class="ughAbsouleNoTop">
      <div class="ion-page">
        <ion-content class="addTankContent">
          <label class="topTitle4 animated slideInUp">Add a tank</label>

          <form class="animated slideInUp" (ngSubmit)="confirmForm()">
            <ion-list>
              <ion-item>
                <ion-label position="stacked">Tank Name</ion-label>
                <ion-input type="text" [(ngModel)]="tank.name" value="" placeholder="{{tank.name}}" name="name" required></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="stacked">Approximate PH (optional)</ion-label>
                <ion-input type="number" [(ngModel)]="tank.ph" name="ph"></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="stacked">Temperature (DEG)</ion-label>

                <ion-range min="15" max="35" step="1" snaps="true" ticks="true" pin="true" [(ngModel)]="tank.temp" name="temp" required>
                  <ion-icon size="small" slot="start" name="snow"></ion-icon>
                  <ion-icon slot="end" name="flame"></ion-icon>
                </ion-range>

              </ion-item>

              <ion-item>
                 <a (click)="showTankSizesImage()" class="leftSize">Typical Sizes</a>
                <ion-label position="stacked">Tank Dimensons in Liters</ion-label>
                <ion-input type="number" [(ngModel)]="tank.size" name="size" required></ion-input>
              </ion-item>

              <ion-radio-group [(ngModel)]="tank.substrate" name="substrate" required>
                <ion-list-header>
                  <ion-label>Substrate</ion-label>
                </ion-list-header>

                <ion-item>
                  <ion-label>Coral Sand</ion-label>
                  <ion-radio slot="start" value="Coral Sand"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>River Sand</ion-label>
                  <ion-radio slot="start" value="River Sand"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Quartz</ion-label>
                  <ion-radio slot="start" value="Quartz"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Laterite</ion-label>
                  <ion-radio slot="start" value="Laterite"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Large Stones</ion-label>
                  <ion-radio slot="start" value="Large Stones"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Medium Stones</ion-label>
                  <ion-radio slot="start" value="Medium Stones"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Micro-Stones</ion-label>
                  <ion-radio slot="start" value="Micro Stones"></ion-radio>
                </ion-item>
                <ion-item>
                  <ion-label>Other</ion-label>
                  <ion-radio slot="start" value="Other"></ion-radio>
                </ion-item>
              </ion-radio-group>

              <button class="confirmBtn" type="submit">Confirm</button>
            </ion-list>

          </form>

          <div class="forcedSpace"></div>

        </ion-content>
      </div>
    </div>
  </div>

  <!-- Section 3: TYPICAL TANK SIZES -->
  <div class="tankSizeSelect" *ngIf="tankSizeImages">
    <ion-icon name="close" (click)="closeTankSizeTrigger()" class="backArrowBlack specialTopArrow"></ion-icon>

    <img src="../assets/sizes.png" />
  </div>

</ion-app>
